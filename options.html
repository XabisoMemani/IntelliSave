<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IntelliSave - Settings</title>
    <link rel="stylesheet" href="styles/shared.css" />
    <link rel="stylesheet" href="styles/options.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="app-container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-header">
          <div class="logo">
            <img src="assets/logo.png" alt="IntelliSave" class="logo-image" />
          </div>
        </div>

        <nav class="sidebar-nav">
          <a href="#" class="nav-item active" data-page="activity-log">
            <svg
              width="15"
              height="15"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
            <span>Activity Log</span>
          </a>
          <a href="#" class="nav-item" data-page="sorting-rules">
            <svg
              width="15"
              height="15"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polygon
                points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"
              ></polygon>
            </svg>
            <span>Sorting Rules</span>
          </a>
          <a href="#" class="nav-item" data-page="preferences">
            <svg
              width="15"
              height="15"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="12" cy="12" r="3"></circle>
              <path
                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"
              ></path>
            </svg>
            <span>Preferences</span>
          </a>
        </nav>

        <div class="sidebar-footer">
          <div class="extension-status">
            <span class="status-label">Extension Status</span>
            <div class="status-toggle">
              <span class="status-text">Active</span>
              <label class="toggle-switch">
                <input type="checkbox" id="extension-toggle" checked />
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Activity Log Page (Landing) -->
        <section id="page-activity-log" class="page active">
          <header class="page-header">
            <h1>Activity Log</h1>
            <div class="header-actions">
              <div class="search-box">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <circle cx="11" cy="11" r="8"></circle>
                  <path d="m21 21-4.35-4.35"></path>
                </svg>
                <input
                  type="text"
                  placeholder="Search downloads..."
                  id="filter-search"
                />
              </div>
            </div>
          </header>
          <div class="page-content">
            <table id="activity-table" class="activity-table">
              <thead>
                <tr>
                  <th>File Name</th>
                  <th>Size</th>
                  <th>Destination</th>
                  <th>Downloaded</th>
                  <th class="cell-actions-header"></th>
                </tr>
              </thead>
              <tbody id="activity-list">
                <!-- Populated by JS with infinite scroll -->
              </tbody>
            </table>
            <div class="list-footer">
              <span id="total-count"></span>
            </div>
          </div>
        </section>

        <!-- Sorting Rules Page -->
        <section id="page-sorting-rules" class="page">
          <header class="page-header">
            <h1>Sorting Rules</h1>
            <div class="header-actions">
              <button class="btn btn-primary" id="add-site-btn">
                Add Website
              </button>
              <div class="search-box">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <circle cx="11" cy="11" r="8"></circle>
                  <path d="m21 21-4.35-4.35"></path>
                </svg>
                <input
                  type="text"
                  placeholder="Search rules..."
                  id="search-rules"
                />
              </div>
            </div>
          </header>
          <div class="page-content">
            <div id="rules-table-wrapper" class="rules-table-wrapper">
              <table id="rules-table" class="activity-table">
                <thead>
                  <tr>
                    <th>Website Domain</th>
                    <th>Sorting Rules</th>
                    <th class="cell-actions-header"></th>
                  </tr>
                </thead>
                <tbody id="rules-list">
                  <!-- Populated by JS -->
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- Preferences Page -->
        <section id="page-preferences" class="page">
          <header class="page-header">
            <h1>Preferences</h1>
            <div class="header-actions">
              <div class="search-box">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <circle cx="11" cy="11" r="8"></circle>
                  <path d="m21 21-4.35-4.35"></path>
                </svg>
                <input
                  type="text"
                  placeholder="Search settings..."
                  id="search-prefs"
                />
              </div>
            </div>
          </header>
          <div class="page-content">
            <div class="settings-group">
              <h2 class="settings-heading">Extension Status</h2>
              <div class="setting-item">
                <div class="setting-info">
                  <span>Enable automatic sorting</span>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" id="auto-routing-toggle" checked />
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>

            <div class="settings-group">
              <h2 class="settings-heading">Smart Learning</h2>
              <div class="setting-item">
                <div class="setting-info">
                  <span>Learn from my Save As choices</span>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" id="auto-learn-toggle" checked />
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>

            <div class="settings-group">
              <h2 class="settings-heading">Default Categories</h2>
              <p class="settings-description">
                Customize these categories to fit your workflow
              </p>
              <div id="categories-list" class="categories-list">
                <!-- Populated by JS -->
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- Add/Edit Website Modal -->
    <div class="modal-overlay" id="site-modal-overlay">
      <div class="modal">
        <div class="modal-header">
          <h2 id="site-modal-title">Add New Website</h2>
          <button class="btn-close" id="site-modal-close">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
            >
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>Website (e.g., behance.net)</label>
            <div class="input-with-icon">
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="12" cy="12" r="10"></circle>
                <path
                  d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"
                ></path>
              </svg>
              <input
                type="text"
                id="site-domain-input"
                placeholder="example.com"
              />
            </div>
          </div>

          <div class="form-group">
            <label>What file types do you download here?</label>
            <div id="file-type-checkboxes" class="file-type-grid">
              <!-- Populated by JS -->
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" id="site-modal-cancel">
            Cancel
          </button>
          <button class="btn btn-primary" id="site-modal-save">
            Save Website
          </button>
        </div>
      </div>
    </div>

    <!-- Add Extension Modal -->
    <div class="modal-overlay" id="ext-modal-overlay">
      <div class="modal" style="max-width: 400px">
        <div class="modal-header">
          <h2 id="ext-modal-title">Add Extension</h2>
          <button class="btn-close" id="ext-modal-close">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
            >
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label id="ext-modal-label">Extension for Code</label>
            <input
              type="text"
              id="ext-modal-input"
              placeholder="e.g. php, cs, dart"
              style="width: 100%"
            />
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" id="ext-modal-cancel">
            Cancel
          </button>
          <button class="btn btn-primary" id="ext-modal-save">
            Add Extension
          </button>
        </div>
      </div>
    </div>

    <script src="options.js"></script>
  </body>
</html>
